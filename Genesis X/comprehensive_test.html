<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comprehensive Genesis Engine Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #000;
            color: #fff;
            margin: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #333;
            border-radius: 5px;
        }
        .success { color: #00ff00; }
        .error { color: #ff0000; }
        .warning { color: #ffff00; }
        .info { color: #00aaff; }
    </style>
</head>
<body>
    <h1>Comprehensive Genesis Engine Test</h1>
    <div id="results"></div>

    <script>
        function log(message, type = 'info') {
            console.log(message);
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = type;
            div.textContent = message;
            results.appendChild(div);
        }

        log('üîç Starting comprehensive test...');
    </script>

    <!-- Core Dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/simplex-noise/2.4.0/simplex-noise.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <!-- Genesis Engine Core Modules -->
    <script src="modules/core/EventBus.js"></script>
    <script src="modules/core/Config.js"></script>
    <script src="modules/core/Utils.js"></script>
    <script src="modules/core/Token.js"></script>
    <script src="modules/core/TokenizationEngine.js"></script>
    
    <!-- Physics and Math -->
    <script src="modules/physics/UnifiedFormula.js"></script>
    <script src="modules/physics/UVO.js"></script>
    <script src="modules/physics/CST.js"></script>
    
    <!-- Audio and Sensory -->
    <script src="modules/sensory/AudioManager.js"></script>
    <script src="modules/sensory/SensoryInputManager.js"></script>
    
    <!-- Soul Dust System -->
    <script src="modules/soul-dust/SoulDustParticle.js"></script>
    <script src="modules/soul-dust/QuantumEventManager.js"></script>
    
    <!-- Rendering -->
    <script src="modules/rendering/Renderer.js"></script>
    <script src="modules/rendering/PostProcessor.js"></script>
    <script src="modules/rendering/Shaders.js"></script>
    
    <!-- AI and Creation -->
    <script src="modules/ai/AIConsciousness.js"></script>
    <script src="modules/ai/ProceduralGenerationEngine.js"></script>
    <script src="modules/ai/ObjectLibrary.js"></script>
    
    <!-- Universe Management -->
    <script src="modules/universe/UniverseManager.js"></script>
    <script src="modules/universe/CameraController.js"></script>
    <script src="modules/universe/InfiniteScaling.js"></script>
    
    <!-- Controls -->
    <script src="modules/controls/PlayerControls.js"></script>
    
    <!-- UI and Controls -->
    <script src="modules/ui/UIManager.js"></script>
    <script src="modules/ui/PerformanceMonitor.js"></script>
    
    <!-- Main Engine -->
    <script src="modules/GenesisEngine.js"></script>

    <script>
        log('üîç All scripts loaded, running comprehensive tests...');
        
        // Test 1: Check all global instances
        log('üìã Test 1: Checking global instances...');
        const requiredInstances = [
            'EventBus', 'Config', 'Utils', 'Token', 'TokenizationEngine',
            'UVO', 'UnifiedFormula', 'AudioManager', 'SensoryInputManager', 
            'QuantumEventManager', 'Renderer', 'PostProcessor', 'Shaders', 
            'UIManager', 'PerformanceMonitor', 'AIConsciousness', 
            'ProceduralGenerationEngine', 'ObjectLibrary', 'UniverseManager', 
            'CameraController', 'InfiniteScaling', 'PlayerControls', 'CST'
        ];
        
        let allInstancesAvailable = true;
        for (const instanceName of requiredInstances) {
            if (window[instanceName]) {
                log(`‚úÖ ${instanceName}: Available`, 'success');
            } else {
                log(`‚ùå ${instanceName}: Missing`, 'error');
                allInstancesAvailable = false;
            }
        }
        
        // Test 2: Check initialize methods
        log('üìã Test 2: Checking initialize methods...');
        const instancesWithInitialize = [
            'EventBus', 'Config', 'Utils', 'TokenizationEngine', 'UVO', 
            'UnifiedFormula', 'AudioManager', 'SensoryInputManager', 
            'QuantumEventManager', 'Renderer', 'PostProcessor', 'Shaders', 
            'UIManager', 'PerformanceMonitor', 'AIConsciousness', 
            'ProceduralGenerationEngine', 'ObjectLibrary', 'UniverseManager', 
            'CameraController', 'InfiniteScaling', 'PlayerControls', 'CST'
        ];
        
        let allInitializeMethodsAvailable = true;
        for (const instanceName of instancesWithInitialize) {
            if (window[instanceName] && typeof window[instanceName].initialize === 'function') {
                log(`‚úÖ ${instanceName}.initialize(): Available`, 'success');
            } else {
                log(`‚ùå ${instanceName}.initialize(): Missing`, 'error');
                allInitializeMethodsAvailable = false;
            }
        }
        
        // Test 3: Test Token system
        log('üìã Test 3: Testing Token system...');
        try {
            const testToken = new window.Token({
                type: 'TEST',
                source: 'test',
                data: { test: true },
                bioFrequency: 440,
                amplitude: 0.5
            });
            log(`‚úÖ Token created: ${testToken.toString()}`, 'success');
        } catch (error) {
            log(`‚ùå Token creation failed: ${error.message}`, 'error');
        }
        
        // Test 4: Test SoulDustParticle creation
        log('üìã Test 4: Testing SoulDustParticle creation...');
        try {
            const testAudioData = {
                frequency: 440,
                amplitude: 0.5,
                spectralComplexity: 0.3,
                timestamp: performance.now()
            };
            const testParticle = new window.SoulDustParticle(testAudioData);
            log(`‚úÖ SoulDustParticle created: ID ${testParticle.id}`, 'success');
            log(`   Position: ${testParticle.position.x.toFixed(2)}, ${testParticle.position.y.toFixed(2)}, ${testParticle.position.z.toFixed(2)}`, 'info');
            log(`   Color: 0x${testParticle.color.toString(16)}`, 'info');
            log(`   Size: ${testParticle.size}`, 'info');
        } catch (error) {
            log(`‚ùå SoulDustParticle creation failed: ${error.message}`, 'error');
        }
        
        // Test 5: Test GenesisEngine creation
        log('üìã Test 5: Testing GenesisEngine creation...');
        try {
            const engine = window.GenesisEngine;
            log(`‚úÖ GenesisEngine instance created`, 'success');
            
            // Test initialization
            log('üîÑ Testing GenesisEngine initialization...');
            engine.initialize().then(() => {
                log(`‚úÖ GenesisEngine initialized successfully`, 'success');
                
                // Test starting the engine
                log('üîÑ Testing GenesisEngine start...');
                engine.start();
                log(`‚úÖ GenesisEngine started successfully`, 'success');
                
                // Test for a few frames
                setTimeout(() => {
                    const stats = engine.getStats();
                    log(`üìä Engine stats after 2 seconds:`, 'info');
                    log(`   FPS: ${stats.fps.toFixed(1)}`, 'info');
                    log(`   Soul Dust Count: ${stats.soulDustCount}`, 'info');
                    log(`   Object Count: ${stats.objectCount}`, 'info');
                    log(`   Memory Usage: ${stats.memoryUsage.toFixed(1)} MB`, 'info');
                    
                    // Stop the engine
                    engine.stop();
                    log(`‚úÖ GenesisEngine stopped successfully`, 'success');
                    
                    // Final summary
                    log('üéâ Comprehensive test completed!', 'success');
                    if (allInstancesAvailable && allInitializeMethodsAvailable) {
                        log('‚úÖ All components are working correctly!', 'success');
                    } else {
                        log('‚ö†Ô∏è Some components have issues, check the errors above', 'warning');
                    }
                }, 2000);
                
            }).catch(error => {
                log(`‚ùå GenesisEngine initialization failed: ${error.message}`, 'error');
            });
            
        } catch (error) {
            log(`‚ùå GenesisEngine creation failed: ${error.message}`, 'error');
        }
        
    </script>
</body>
</html> 