<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Genesis Engine - Undefined Error Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #000;
            color: #fff;
            padding: 20px;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }
        .success { background: #0a5; }
        .error { background: #a05; }
        .warning { background: #a50; }
    </style>
</head>
<body>
    <h1>üîç Genesis Engine - Undefined Error Test</h1>
    <div id="test-results"></div>

    <!-- Core Dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://unpkg.com/tone@14.7.77/build/Tone.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/simplex-noise/2.4.0/simplex-noise.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <!-- Genesis Engine Core Modules -->
    <script src="modules/core/EventBus.js"></script>
    <script src="modules/core/Config.js"></script>
    <script src="modules/core/Utils.js"></script>
    <script src="modules/core/Token.js"></script>
    <script src="modules/core/TokenizationEngine.js"></script>
    
    <!-- Physics and Math -->
    <script src="modules/physics/UnifiedFormula.js"></script>
    <script src="modules/physics/UVO.js"></script>
    <script src="modules/physics/CST.js"></script>
    
    <!-- Audio and Sensory -->
    <script src="modules/sensory/AudioManager.js"></script>
    <script src="modules/sensory/SensoryInputManager.js"></script>
    
    <!-- Soul Dust System -->
    <script src="modules/soul-dust/SoulDustParticle.js"></script>
    <script src="modules/soul-dust/QuantumEventManager.js"></script>
    
    <!-- Rendering -->
    <script src="modules/rendering/Renderer.js"></script>
    <script src="modules/rendering/PostProcessor.js"></script>
    <script src="modules/rendering/Shaders.js"></script>
    
    <!-- AI and Creation -->
    <script src="modules/ai/AIConsciousness.js"></script>
    <script src="modules/ai/ProceduralGenerationEngine.js"></script>
    <script src="modules/ai/ObjectLibrary.js"></script>
    
    <!-- Universe Management -->
    <script src="modules/universe/UniverseManager.js"></script>
    <script src="modules/universe/CameraController.js"></script>
    <script src="modules/universe/InfiniteScaling.js"></script>
    
    <!-- Controls -->
    <script src="modules/controls/PlayerControls.js"></script>
    
    <!-- UI and Controls -->
    <script src="modules/ui/UIManager.js"></script>
    <script src="modules/ui/PerformanceMonitor.js"></script>
    
    <!-- Main Engine -->
    <script src="modules/GenesisEngine.js"></script>
    <script src="init_components.js"></script>

    <script>
        function addTestResult(message, type = 'success') {
            const resultsDiv = document.getElementById('test-results');
            const resultDiv = document.createElement('div');
            resultDiv.className = `test-result ${type}`;
            resultDiv.textContent = message;
            resultsDiv.appendChild(resultDiv);
        }

        async function runTests() {
            console.log('üß™ Starting undefined error tests...');
            addTestResult('üß™ Starting undefined error tests...');

            // Test 1: Check if Utils is available
            addTestResult('Test 1: Checking Utils availability...');
            if (window.Utils) {
                addTestResult('‚úÖ Utils is available', 'success');
                
                // Test 2: Check if Utils is initialized
                if (window.Utils.isInitialized) {
                    addTestResult('‚úÖ Utils is initialized', 'success');
                } else {
                    addTestResult('‚ö†Ô∏è Utils is not initialized', 'warning');
                    window.Utils.initialize();
                    addTestResult('‚úÖ Utils initialized manually', 'success');
                }
                
                // Test 3: Check if randomPointInSphere method exists
                if (typeof window.Utils.randomPointInSphere === 'function') {
                    addTestResult('‚úÖ randomPointInSphere method exists', 'success');
                    
                    // Test 4: Test the method
                    try {
                        const testPoint = window.Utils.randomPointInSphere(10);
                        if (testPoint && typeof testPoint.x === 'number' && 
                            typeof testPoint.y === 'number' && 
                            typeof testPoint.z === 'number') {
                            addTestResult('‚úÖ randomPointInSphere works correctly', 'success');
                        } else {
                            addTestResult('‚ùå randomPointInSphere returned invalid result', 'error');
                        }
                    } catch (error) {
                        addTestResult(`‚ùå randomPointInSphere failed: ${error.message}`, 'error');
                    }
                } else {
                    addTestResult('‚ùå randomPointInSphere method does not exist', 'error');
                }
            } else {
                addTestResult('‚ùå Utils is not available', 'error');
            }

            // Test 5: Check if SoulDustParticle is available
            addTestResult('Test 5: Checking SoulDustParticle availability...');
            if (window.SoulDustParticle) {
                addTestResult('‚úÖ SoulDustParticle is available', 'success');
                
                // Test 6: Try to create a SoulDustParticle
                try {
                    const testAudioData = {
                        frequency: 440,
                        amplitude: 0.5,
                        spectralComplexity: 0,
                        timestamp: performance.now(),
                        buffer: new Float32Array(1024)
                    };
                    
                    const testParticle = new window.SoulDustParticle(testAudioData);
                    addTestResult('‚úÖ SoulDustParticle created successfully', 'success');
                    
                    // Test 7: Check if particle has position
                    if (testParticle.position && typeof testParticle.position.x === 'number') {
                        addTestResult('‚úÖ SoulDustParticle position is valid', 'success');
                    } else {
                        addTestResult('‚ùå SoulDustParticle position is invalid', 'error');
                    }
                } catch (error) {
                    addTestResult(`‚ùå SoulDustParticle creation failed: ${error.message}`, 'error');
                }
            } else {
                addTestResult('‚ùå SoulDustParticle is not available', 'error');
            }

            // Test 8: Check GenesisEngine initialization
            addTestResult('Test 8: Checking GenesisEngine initialization...');
            if (window.GenesisEngine) {
                addTestResult('‚úÖ GenesisEngine is available', 'success');
                
                try {
                    await window.GenesisEngine.initialize();
                    addTestResult('‚úÖ GenesisEngine initialized successfully', 'success');
                } catch (error) {
                    addTestResult(`‚ùå GenesisEngine initialization failed: ${error.message}`, 'error');
                    console.error('GenesisEngine initialization error:', error);
                }
            } else {
                addTestResult('‚ùå GenesisEngine is not available', 'error');
            }

            addTestResult('üèÅ All tests completed');
        }

        // Run tests when page loads
        document.addEventListener('DOMContentLoaded', runTests);
    </script>
</body>
</html> 